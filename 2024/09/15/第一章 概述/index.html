
<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="utf-8" />
    <title>第一章 | K-ON!!!</title>
    <meta name="author" content="Coiness" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/K-ON_Avatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>K-ON!!!</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;K-ON!!!</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>第一章</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/9/15
        </span>
        
        <span class="category">
            <a href="/categories/TCP-IP/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                TCP/IP
            </a>
        </span>
        
        
    </div>
    
    <div class="content" v-pre>
        <p>这是我上传的第一篇关于《TCP&#x2F;IP详解的文章》。本文在保持尽可能简洁的前提下，涵盖了《TCP&#x2F;IP详解》第一章的所有内容。</p>
<span id="more"></span>

<p>在互联网的体系架构中，<strong>协议</strong>无疑是一个关键概念。那么，什么是协议呢？根据词典的定义，协议是“国家事务或外交场合的正式程序或规则系统”。在日常生活中，我们执行着各种协议，例如询问与回答问题、谈判商业交易、协同工作等。同样，计算机也通过协议来进行通信。一系列相关协议的集合称为<strong>协议族</strong>。而定义协议族中各个协议之间的关系并划分其职责的设计，称为<strong>协议族的体系结构</strong>或<strong>参考模型</strong>。</p>
<p><strong>TCP&#x2F;IP协议族</strong>是实现互联网体系架构的主要协议族，也是当前最流行的协议族。它的体系结构来源于早期的<strong>ARPANET参考模型</strong>。尽管ARPANET是世界上第一个分组交换网络，但它并没有系统化的分层描述。不过，ARPANET为现代网络的分层模型提供了早期的雏形。</p>
<h2 id="1-1-体系结构原则"><a href="#1-1-体系结构原则" class="headerlink" title="1.1 体系结构原则"></a>1.1 体系结构原则</h2><p>Internet的设计受几个核心目标的指导，首要目标是“开发一种能够重复利用现有互联网络的技术”。这句话的核心思想是，Internet应能够将多种网络互联，并在这些互联的网络上同时运行多种应用。除此之外，还有一些次要目标：</p>
<ul>
<li><strong>冗余与可靠性</strong>：Internet通信应在网络或网关失效时持续工作（分布式、冗余路径）。</li>
<li><strong>多样性与包容性</strong>：Internet必须支持多种类型的通信服务，并兼容多种网络。</li>
<li><strong>分布式管理</strong>：Internet的资源管理应允许分布式操作，具备灵活性。</li>
<li><strong>经济高效</strong>：Internet体系结构必须是经济可行的，确保简洁性。</li>
<li><strong>包容性</strong>：Internet必须允许低能力的主机连接，确保平等与简洁。</li>
<li><strong>可统计性</strong>：Internet使用的资源应是可统计和可监控的，以提高灵活性、效率和安全性。</li>
</ul>
<h3 id="1-1-1-分组、连接和数据报"><a href="#1-1-1-分组、连接和数据报" class="headerlink" title="1.1.1 分组、连接和数据报"></a>1.1.1 分组、连接和数据报</h3><p>过去的网络概念主要基于电话网络。在电话网络中，通信双方需要建立一条连接，这条连接通常代表一条专线。在连接建立后，双方通过固定的带宽交换信息。通常这种服务按时间收费，而不是按传输的数据量收费。连接一旦建立后，这条线路即使空闲，也会被占用。电话网络的优点是服务可预测，但代价是带宽浪费和用户灵活性低。</p>
<p>为了解决这些问题，提出了<strong>分组交换</strong>的思想。在分组交换中，信息被分成独立的“分组”，通过多路复用（如频分复用、时分复用等）方式发送到接收方。接收方再将这些分组还原。这种方式大大提高了物理信道的利用率，同时传输路径也可以动态调整，带来了网络的弹性和基于流量的资源分配。</p>
<p>当分组交换机接收到分组时，它会将分组存储在缓冲区中，并按照先到先服务（FIFO）的方式处理。这种方法简单高效，但可预测性较差。</p>
<p><strong>虚电路</strong>是一种分组交换中更具可预测性的技术。它在通信双方之间建立一条逻辑连接，提供一定的带宽，并保证分组按顺序到达，但并不占用实际的物理链路。虚电路是面向连接的，具有连接建立、可靠性和顺序保证等特性，通信双方行为类似于状态机。</p>
<p><strong>数据报</strong>是一种特殊的分组类型，携带完整的源和目的地信息，不依赖交换机维护连接状态，适用于无连接网络。引入数据报极大地影响了Internet协议架构，因为它简化了网络的信令要求。</p>
<p>最后一个相关概念是<strong>消息边界</strong>。当应用程序发送数据时，协议可以选择是否添加消息边界。如果添加了，接收方可以直接处理一块一块的数据；否则，接收方需要在应用层自行处理数据流的边界。</p>
<h3 id="1-1-2-端到端论点和命运共享"><a href="#1-1-2-端到端论点和命运共享" class="headerlink" title="1.1.2 端到端论点和命运共享"></a><strong>1.1.2 端到端论点和命运共享</strong></h3><p><strong>端到端论点</strong>主张某些重要功能应尽可能在端系统上实现，而不是在中间节点（如路由器和交换机）上。尽管在应用程序的实现中可能付出很多努力，但这些功能往往无法达到完善的状态。这一原则认为，重要功能（如差错控制、加密和交付确认）通常不应在大型系统的底层实现。底层应提供支持端系统的功能，从而可能改善整体性能。因为对应用程序需求的完美预测是不现实的，底层功能也不应追求完美。</p>
<p>端到端论点倾向于支持一种“哑”网络与“智能”终端系统的设计方案，系统提供尽力而为的服务。关于哪些功能在计算机、网络或协议栈中实现，这涉及到另一个相关原则——<strong>命运共享</strong>。</p>
<p><strong>命运共享</strong>的核心思想是：如果两个或多个组件紧密相关，并依赖于共同的状态，则它们应该共存亡。换句话说，状态和信息应尽可能保存在终端上，而非中间的网络节点。因为如果网络节点故障，终端也可能受到影响，这是大家都不希望看到的。</p>
<h3 id="1-1-3-差错控制和流量控制"><a href="#1-1-3-差错控制和流量控制" class="headerlink" title="1.1.3 差错控制和流量控制"></a><strong>1.1.3 差错控制和流量控制</strong></h3><p>在网络通信中，数据可能会因多种原因损坏或丢失，对这种错误的处理称为<strong>差错控制</strong>。差错控制分为两步：<strong>错误检测</strong>和<strong>错误校正</strong>。错误检测的方法包括检验和、奇偶校验、循环冗余校验等；错误校正则有通过冗余信息进行的前向纠错（向前纠错）和直接重传的方式。</p>
<p>根据端到端论点和命运共享原则，差错控制应尽可能在应用程序附近或内部进行。网络本身基于<strong>尽力而为</strong>的原则，不会花费太多资源来确保数据完全无误，通常只进行校验和检测。一旦发现错误，数据包会直接被丢弃（从上层角度来看，这就是所谓的丢包问题，上层协议会处理这些问题）。</p>
<p>关于<strong>流量控制</strong>，这是一个复杂的话题，稍后会更详细讨论。现在只需了解，当发送方的速度超过接收方的处理能力时，为了防止数据在网络中堆积并引发拥塞，发送方的发送速率需要降低。流量控制机制通常在网络外部或通信系统的高层实现。</p>
<h2 id="1-2-设计和实现"><a href="#1-2-设计和实现" class="headerlink" title="1.2 设计和实现"></a>1.2 设计和实现</h2><p>在设计协议体系结构时，尽管建议使用特定的实现方法，但这通常不是强制性的。因此，我们需要区分<strong>协议体系结构</strong>和<strong>实现体系结构</strong>。<strong>协议体系结构</strong>定义了通信协议的概念，而<strong>实现体系结构</strong>定义了这些概念如何在软件中实现。分层是实现协议体系结构的常见方法。</p>
<h3 id="1-2-1-分层"><a href="#1-2-1-分层" class="headerlink" title="1.2.1 分层"></a>1.2.1 分层</h3><p>通过分层，每一层只负责通信的一个方面：</p>
<ul>
<li><strong>物理层</strong>：定义通过某种通信介质传输数字信息的方法。</li>
<li><strong>数据链路层</strong>：包括为共享相同介质的邻居建立连接的协议。当多个节点共享同一个通信介质时，可能发生碰撞或冲突。</li>
<li><strong>网络层</strong>：提供一种标准化的分组格式，使不同类型的链路网络可以识别和处理这些数据包。</li>
<li><strong>传输层</strong>：提供应用之间的可靠数据流。负责连接的初始化、检查点设置和连接重启等。</li>
<li><strong>会话层和表示层</strong>：在Internet协议中，这两层通常由应用程序自行实现，会话层负责管理应用之间的会话，而表示层负责数据的格式转换和编码标准化。</li>
<li><strong>应用层</strong>：最高层，为用户提供各种应用协议，例如HTTP、FTP等。</li>
</ul>
<h3 id="1-2-2-分层实现的复用、分解和解封装"><a href="#1-2-2-分层实现的复用、分解和解封装" class="headerlink" title="1.2.2 分层实现的复用、分解和解封装"></a>1.2.2 分层实现的复用、分解和解封装</h3><p>分层体系结构的一个主要优点是支持<strong>协议复用</strong>。这种复用允许基础设施支持多种协议，同时多个相同协议的实例可以同时存在而不互相干扰。</p>
<p><strong>协议复用</strong>的核心思想是，下层协议提供通用的传输服务，上层协议通过这个服务发送和接收数据。当上层的数据被下层封装时，下层对这些数据是不可见的，直到数据到达目标并解封装。</p>
<p>多个上层对象（如应用程序）可以通过N-1层（例如传输层）的封装机制，利用下层协议提供的服务。</p>
<p>通常，协议栈的所有层仅需在通信端点（如主机）上实现，而中间节点（如路由器）只需实现协议栈的一部分。不过，随着技术的发展，有些交换机和路由器也需要实现更高层的功能，以支持远程管理。</p>
<p><strong>网络层</strong>提供了一种逐跳传输协议，适用于端系统和每个中间系统。交换机或桥接设备通常不被认为是中间系统，因为它们不使用互联网协议地址格式。</p>
<p>拥有多个网络接口的系统（如路由器）称为<strong>多宿主系统</strong>。主机也可以是多宿主，并在适当配置下执行路由功能。不过，只有专门用于在网络接口之间转发数据包的设备才能称为路由器。</p>
<p>互联网的一个目标是对应用程序隐藏物理布局（拓扑）和底层协议的复杂性。每一层都为上层提供服务，使上层可以专注于自己的功能，而不必考虑底层的细节。</p>
<h2 id="1-3-TCP-IP协议族结构和协议"><a href="#1-3-TCP-IP协议族结构和协议" class="headerlink" title="1.3 TCP&#x2F;IP协议族结构和协议"></a>1.3 TCP&#x2F;IP协议族结构和协议</h2><h3 id="1-3-1-ARPANET参考模型"><a href="#1-3-1-ARPANET参考模型" class="headerlink" title="1.3.1 ARPANET参考模型"></a>1.3.1 ARPANET参考模型</h3><p>ARPANET参考模型被TCP&#x2F;IP协议族采用，其结构比OSI模型更简化，将会话层和表示层合并到应用层。</p>
<p>除了标准的层级外，还有一些“辅助”协议。这些协议不属于主要层次，但为其他协议提供关键支持。例如，链路层的辅助层（通常称为“2.5层”）中有地址解析协议（ARP），它是IPv4的专用协议，负责将IP地址映射到链路层地址（如MAC地址）。对于IPv6，地址映射由ICMPv6处理。</p>
<p>在网络层（第3层），最重要的协议是IP。IP负责将数据报发送到链路层，并通过分片和重组确保大的分组能通过链路层传输。每个IP数据报都包含发送方和接收方的IP地址（IPv4为32位，IPv6为128位），这些地址用于在网络中路由数据。</p>
<p>IP地址有三种类型：单播（发送给单个接收方）、广播（发送给所有主机）和组播（发送给一个特定的组）。</p>
<p>IP层还有一些辅助协议，如ICMP（Internet控制消息协议）。ICMP用于报告网络差错信息，并为ping和traceroute等诊断工具提供支持。IGMP（Internet组管理协议）用于IPv4的组播管理。</p>
<h3 id="1-3-2-传输层协议"><a href="#1-3-2-传输层协议" class="headerlink" title="1.3.2 传输层协议"></a>1.3.2 传输层协议</h3><p>传输层的两个核心协议是TCP和UDP：</p>
<ul>
<li><strong>TCP（传输控制协议）</strong>：面向连接，提供可靠的传输，处理数据包的丢失、重复、乱序等问题。它不会保留消息边界，确保传输的可靠性。</li>
<li><strong>UDP（用户数据报协议）</strong>：简单且无连接，保留消息边界，适用于不需要复杂控制的应用，但不提供可靠性保障。它更轻量，但需要应用层自行实现错误处理等功能。</li>
</ul>
<p>应用层的具体应用会根据需要选择使用TCP还是UDP。</p>
<h3 id="1-3-3-封装与解封装"><a href="#1-3-3-封装与解封装" class="headerlink" title="1.3.3 封装与解封装"></a>1.3.3 封装与解封装</h3><p>封装是指将上层协议的数据加上当前层的头部信息，然后传递给下一层；解封装则是接收方从头部信息中提取数据并传递到正确的协议层进行处理。不同协议会在头部中包含不同的标识信息，接收方根据这些信息进行解封。</p>
<h3 id="1-3-4-端口号"><a href="#1-3-4-端口号" class="headerlink" title="1.3.4 端口号"></a>1.3.4 端口号</h3><p>端口号是16位数字，用于标识特定的应用或进程。它们被划分为三类：</p>
<ul>
<li><strong>熟知端口号</strong>：通常分配给标准服务（如HTTP的80端口）。</li>
<li><strong>注册端口号</strong>：为特定应用保留。</li>
<li><strong>动态&#x2F;私有端口号</strong>：供用户或应用自行分配使用。</li>
</ul>
<p>通过端口号，客户端和服务器可以识别和区分不同的通信进程。</p>
<h3 id="1-3-5-DNS（域名系统）"><a href="#1-3-5-DNS（域名系统）" class="headerlink" title="1.3.5 DNS（域名系统）"></a>1.3.5 DNS（域名系统）</h3><p>当访问网站时，我们通常使用域名（如<a target="_blank" rel="noopener" href="http://www.baidu.com),但计算机实际依赖的是ip地址.dns协议用于将域名解析为对应的ip地址,dns运行在应用层,是互联网的重要组成部分./">www.baidu.com），但计算机实际依赖的是IP地址。DNS协议用于将域名解析为对应的IP地址，DNS运行在应用层，是互联网的重要组成部分。</a></p>
<h2 id="1-4-Internet、内联网和外联网"><a href="#1-4-Internet、内联网和外联网" class="headerlink" title="1.4 Internet、内联网和外联网"></a>1.4 Internet、内联网和外联网</h2><p><strong>Internet</strong>是由多个网络相互连接组成的全球网络。与之相对，<strong>内网</strong>（也称为内联网）是封闭的网络，通常用于企业或机构内部。<strong>外网</strong>则指的是对外开放的网络，通常指Internet。</p>
<p>内网与外网之间通常无法直接访问，但可以通过<strong>虚拟专用网（VPN）</strong>实现从外部安全地访问内网资源。</p>
<h2 id="1-5-设计应用"><a href="#1-5-设计应用" class="headerlink" title="1.5 设计应用"></a>1.5 设计应用</h2><p>网络应用通常基于以下两种主要结构模式：</p>
<ol>
<li><strong>客户机&#x2F;服务器模式（CS模式）</strong>：<ul>
<li>在这种模式下，数据主要存储在服务器上。</li>
<li>用户必须向服务器请求资源。</li>
<li>该模式是集中式的，如果服务器出现故障，整个系统将无法正常工作，且扩展性较差，可能造成瓶颈。</li>
</ul>
</li>
<li><strong>对等模式（P2P模式）</strong>：<ul>
<li>所有主机既可以是客户端，也可以是服务器。</li>
<li>资源请求和提供均由各主机相互间完成。</li>
<li>该模式是分布式的，单个节点的故障不会影响其他节点的正常工作，具有较强的扩展性和灵活性。</li>
</ul>
</li>
</ol>
<h2 id="1-6-与Internet体系结构相关的攻击"><a href="#1-6-与Internet体系结构相关的攻击" class="headerlink" title="1.6 与Internet体系结构相关的攻击"></a>1.6 与Internet体系结构相关的攻击</h2><p>在Internet中，恶意用户可以伪造数据报的源IP地址，这种行为称为<strong>欺骗</strong>。尽管数据报可以成功送达目的地，但其真实来源无法被确认。</p>
<p><strong>拒绝服务（DoS）攻击</strong>通过消耗大量系统资源使合法用户无法获取服务。当多个计算机共同发起攻击时，就形成了<strong>分布式拒绝服务（DDoS）攻击</strong>。</p>
<p><strong>未授权访问攻击</strong>指以非法方式访问信息或资源。例如，攻击者利用协议实现中的漏洞控制系统（称为“占有”该系统并将其转变为僵尸主机）。此类攻击还可能涉及伪装，攻击者可能冒充合法用户（如使用用户证书）。</p>
<p>初始的Internet体系结构中并没有内置加密功能。尽管可以在某些层启用加密，只有主机间的加密（IP层以上的加密）才能在跨多个网络段时提供保护。</p>

    </div>
    
    
    
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2024 K-ON!!!
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;Coiness
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    




    
</body>
</html>
